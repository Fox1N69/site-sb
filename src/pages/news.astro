---
import NavBar from "../components/Header/Navigation_otherPage.astro";
import Layout from "../layouts/Layout.astro";
import "../assets/styles/index.scss";
import Footer from "../components/Footer/Footer.astro";
---

<script is:inline lang="js">
  document.getElementById("myForm").addEventListener("submit", function (e) {
    e.preventDefault();

    const formData = {
      Title: document.getElementById("title").value,
      Description: document.getElementById("description").value,
      PostBody: document.getElementById("postBody").value,
    };

    fetch("http://127.0.0.1:4000/posts/set", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        Accept: "*/*",
      },
      body: JSON.stringify(formData),
    })
      .then((response) => response.json())
      .then((data) => {
        console.log("Успешно отправлено:", data);
      })
      .catch((error) => {
        console.error("Ошибка:", error);
      });
  });
</script>

<Layout title="NewsLayout">
  <div class="news__header">
    <div class="news__container">
      <NavBar />
      <div class="text__container">
        <h1 class="news__title">Новости нашего клуба</h1>
        <p class="news__description">
          Lorem ipsum dolor sit amet consectetur. Odio consequat quis quis elit
          eu. Tempus facilisis semper nullam donec sit sed ultricies viverra.
          Congue diam purus risus praesent elit.
        </p>
      </div>
    </div>
  </div>

  <section class="news__section">
    <h1>Form</h1>
    <form method="POST" id="myForm">
      <label for="title">Заголовок:</label>
      <input type="text" id="title" name="title" /><br /><br />
      <label for="description">Описание:</label>
      <input type="text" id="description" name="description" /><br /><br />
      <label for="postBody">Тело поста:</label>
      <input type="text" id="postBody" name="postBody" /><br /><br />
      <button type="submit">Отправить</button>
    </form>
  </section>

  <Footer />
</Layout>

<section class="news__page"></section>

<style lang="scss" scoped>
  .news__container {
    padding: 0 calc(50% - 749px);
  }

  .news__header {
    height: 460px;
    background-color: white;

    padding-top: 40px;
  }

  .text__container {
    width: 533px;
    min-height: 231px;
    display: flex;
    flex-direction: column;
    gap: 30px;
    .news__title {
      width: 377px;

      font-family: Montserrat, sans-serif;
      font-size: 50px;
      font-weight: bold;
    }

    .news__description {
      width: 533px;
      min-height: 79px;
      font-family: Montserrat, sans-serif;
      font-weight: 400;
      font-size: 16px;
      line-height: 150%;
    }
  }
</style>
